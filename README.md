# Тестовое задание для Antipoff Group

## Используется стек:

1. Django + DRF для построение API, ORM, панель админа
2. Celery + Redis для выполнения асинхронных запросов в third-party сервис
3. FastAPI в качестве простого third-party сервиса

## Установка
1. Копируем репозиторий
3. Запускаем docker build `docker compose build`
4. Поднимаем docker контейнеры `docker compose up`
5. Сервисы доступны по адресам - 127.0.0.1:8000 (основной) и 127.0.0.1:8001 (third-party)

## Тесты
- Подключаемся к контейнеру - `docker exec -it antipoff-djangoapp-1 /bin/bash`
- Запускаем тесты - `cd app/ && pytest`

## Доступные endpoint API
- `/ping/` - GET для проверки
- `/query/` - POST для отправки нового запроса с указанием кадастрового номера, широты и долготы
- `/result/<str:id>/` - GET для получения результата запроса в third-party сервер
- `/history/<str:id>/` - GET для получения истории запросов по указанному кадастровому номеру

## ТЗ
### Описание задания:
1. Написать сервис, который принимает запрос с указанием кадастрового номера, широты и долготы, эмулирует отправку запроса на внешний сервер, который может обрабатывать запрос до 60 секунд. Затем должен отдавать результат запроса. Считается, что внешний сервер может ответить `true` или `false`.
2. Данные запроса на сервер и ответ с внешнего сервера должны быть сохранены в БД. Нужно написать АПИ для получения истории всех запросов/истории по кадастровому номеру.
3. Сервис должен содержать следующие эндпоинты:
    - "/query" - для получения запроса
    - “/result" - для отправки результата	
    - "/ping" - проверка, что  сервер запустился
    - “/history” - для получения истории запросов
4. Добавить Админку.
5. Сервис завернуть в Dockerfile.
6. *В качестве дополнительного задания. Можно добавить дополнительный сервис, который будет принимать запросы первого сервиса и эмулировать внешний сервер.
